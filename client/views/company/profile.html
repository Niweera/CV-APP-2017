<script type="text/javascript">
    if (typeof userID == 'undefined') {
        window.location.replace('./');
    }
</script>

<div class="row clearfix">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
            <div class="header">
                <h2>Change Password</h2>
            </div>
            <div class="body">
                <form id="change_password" method="POST">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="material-icons">lock</i>
                        </span>
                        <div class="form-line">
                            <input type="password" class="form-control" name="oldpassword" minlength="6"
                                   placeholder="Current Password" required>
                        </div>
                    </div>

                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="material-icons">lock</i>
                        </span>
                        <div class="form-line">
                            <input type="password" class="form-control" name="password" minlength="6"
                                   placeholder="New Password" required>
                        </div>
                    </div>

                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="material-icons">lock</i>
                        </span>
                        <div class="form-line">
                            <input type="password" class="form-control" name="confirm" minlength="6"
                                   placeholder="Confirm Password" required>
                        </div>
                    </div>

                    <button id="submit-btn" class="btn btn-primary waves-effect" type="submit">CHANGE
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    if("undefined"==typeof userID)window.location.replace("./");else{$(function(){$("#change_password").validate({rules:{confirm:{equalTo:'[name="password"]'}},highlight:function(e){$(e).parents(".form-line").addClass("error")},unhighlight:function(e){$(e).parents(".form-line").removeClass("error")},errorPlacement:function(e,t){$(t).parents(".input-group").append(e),$(t).parents(".form-group").append(e)}})}),$(function(){$.AdminBSB.input.activate(),$.AdminBSB.select.activate()});var change_pass_form=$("#change_password");$("#submit-btn").click(function(e){if(change_pass_form.valid()){e.preventDefault();var t=change_pass_form.serialize(),n=currentUser();$.ajax({type:"POST",url:domain+"changepass",data:t+"&username="+n.name,dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization",getToken())},success:function(e){1==e.success?(document.getElementById("change_password").reset(),showSuccessMessage("Password updated successfully!")):showErrorMessage(e.msg)},error:function(e,t,n){console.log(e),console.log(t,n)}})}})}
</script>
