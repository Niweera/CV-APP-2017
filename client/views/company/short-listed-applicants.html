<script type="text/javascript">
    if (typeof userID == 'undefined') {
        window.location.replace('./');
    }
</script>

<div class="row clearfix">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
            <div class="body">
                <ul class="nav nav-tabs tab-nav-right" id="navdiv" role="tablist">
                    <!-- position tabs goes here -->
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="row clearfix">

    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
            <div class="header">
                <h2>
                    All Short Listed Applicants
                </h2>
            </div>
            <div class="body">
                <table id="shortListedTable" class="table table-bordered table-striped table-hover" cellspacing="0"
                       width="100%">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Year</th>
                        <th>Stream</th>
                        <th>CV</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
  "undefined"==typeof userID?window.location.replace("./"):$(document).ready(function(){var e='<a class="btn btn-info btn-sm  waves-effect ajaxView" style = "margin-right:10px;" title="View CV"> <i class="material-icons">description</i> </a>',t="ajaxView";companyObject.positions.forEach(function(e){var t="<li role='presentation'><a class='positionTab' href='#tablediv' data-toggle='tab'>"+e+"</a></li>";$("#navdiv").append(t)});var n=$("#navdiv").children()[0];$(n).addClass("active");var o=companyObject.positions[0],a=$("#shortListedTable").DataTable({dom:"Bfrtip",responsive:!0,buttons:[{extend:"pdfHtml5",message:"All shortlisted Applicants - "+o,title:"UCSC Career Fair 2017",filename:"All shortlisted Applicants - "+o,exportOptions:{columns:[0,1,2,3,4]},init:function(e,t,n){$(".positionTab").on("click",function(){n.message=n.filename="All shortlisted applicants - "+$(this).text()})}}],ajax:{url:domain+"selected_student_company/students",data:function(e){e.company=companyObject._id,e.position=o},beforeSend:function(e){e.setRequestHeader("Authorization",getToken())},dataSrc:"result"},columns:[{data:"name"},{data:"email"},{data:"phone"},{data:"year",width:"15%"},{data:"stream",width:"12%"},{width:"10%",data:null,defaultContent:e}],order:[[1,"asc"]],initComplete:function(){this.api().columns().every(function(){if(3==this[0]||4==this[0]){var e=this,t=$('<select><option value="">All</option></select>').appendTo($(e.header()).append("</br> ")).on("change",function(){var t=$.fn.dataTable.util.escapeRegex($(this).val());e.search(t?"^"+t+"$":"",!0,!1).draw()});e.data().unique().sort().each(function(e,n){t.append('<option value="'+e+'">'+e+"</option>")})}})},language:{emptyTable:"No applicants shortlisted for this position."}});a.on("click","."+t,function(){var e=a.row($(this).parents("tr")).data();window.open(domain+"uploads/"+e.cv)}),a.on("draw.dt",function(){0===a.data().length?a.buttons().disable():a.buttons().enable()}),$(".positionTab").click(function(){o=$(this).text(),a.ajax.reload()})});

</script>
